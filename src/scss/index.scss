@import '~normalize.css';
@import "fonts";
@import "colors";
@import "suits";

%suitSize {
  width: 40px;
  height: 40px;
}

%rankSuitSize {
  width: 10px;
  height: 10px;
}

%shirts {
  background-color: $cardsShirtColor;
  background-image: url("../assets/svg/suits.svg");
  background-repeat: no-repeat;
}


body {
  font-family: 'Cards Caracter', sans-serif;
  font-size: 1rem;

  .game {
    background: $backgroundColor;
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;

    &__body {
      width: 90%;
      height: 90%;
      border-radius: 50px;
      background: $bodyColor;
      overflow: scroll;
      display: grid;
      grid-template-columns: minmax(250px, 1fr) 1fr minmax(250px, 1fr);
      grid-template-rows: repeat(3, auto);
      gap: 20px;
      align-items: center;
      justify-items: center;
      grid-template-areas:
              "trump pc ."
              "deck table discard"
              "btn player .";

      .card {
        position: absolute;
        display: flex;
        flex-flow: column;
        justify-content: space-between;
        align-items: center;
        width: 80px;
        height: 120px;
        padding: 5px;
        margin: 5px;
        background: $cardColor;
        border: 2px solid black;
        border-radius: 10px;
        z-index: 2;
        opacity: 1;
        transition: .3s;

        &__trump:not(.deck .card__trump) {
          @extend %shirts;
          transform: rotate(0deg);

          &.card__shirt:not(.deck .card__trump) > * {
            visibility: hidden;
          }
        }

        &__trump {
          transform: rotate(90deg);
          top: 10px;
          right: -20px;
          z-index: 1;
        }

        // рубашки карт
        &__shirt:not(.card__trump) {
          @extend %shirts;
        }

        &__top {
          display: flex;
          flex-flow: column;
          align-self: flex-start;
          align-items: center;
        }

        &__bottom {
          display: flex;
          flex-flow: column;
          align-self: flex-end;
          align-items: center;
          transform: rotate(180deg);
        }

        &.hidden {
          opacity: 0;
          transition: .3s;
        }

        &__rankSuit {
          @extend %rankSuitSize;
        }

        .spades {
          @extend %spades;
        }

        .clubs {
          @extend %clubs;
        }

        .diamonds {
          @extend %diamonds;
        }

        .hearts {
          @extend %hearts;
        }

        &__suit {
          @extend %suitSize;
        }

        // рубашки карт
        &.card__shirt:not(.card__trump) > * {
          visibility: hidden;
        }
      }

      .deck {
        grid-area: deck;
        position: relative;
        right: 20px;
        width: 150px;
        height: 150px;
      }

      .table {
        position: relative;
        grid-area: table;
        display: flex;
        flex-flow: row;
        justify-content: center;
        width: 100%;

        & .card {
          position: relative;
          background: $cardColor;
          opacity: 1;
          transition: .3s;
        }

        & .card:nth-child(even) {
          position: absolute;
          left: 44%;
          top: 10%;
          box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.4);
          background: $cardColor;
        }

        & > .card.card__shirt > * {
          visibility: visible;
        }
      }

      .discard {
        grid-area: discard;
        display: flex;
        flex-flow: row;
        position: relative;
        left: -50px;
        height: 150px;
        width: 150px;

        .card:nth-child(even){
          transform: rotate(random(30) + deg);
        }
      }

      .hands {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;

        & .card {
          position: static;
        }
      }

      .pcHand {
        grid-area: pc;
      }

      .playerHand {
        grid-area: player;

        & > .card.card__shirt > * {
          visibility: visible;
        }

        & > .card {
          background: $cardColor;
          cursor: pointer;
          transition: .3s;

          &.cardsForDefer {
            background: $cardsForDeferColor;
            border-color: $actionBtnDiscardColor;
          }
        }

        & > .card:hover {
          transform: translateY(-5px);
          box-shadow: 3px 3px 3px 0 rgba(0, 0, 0, 0.5);
        }
      }

      .actionBtn {
        grid-area: btn;
        position: relative;
        left: 10px;
        visibility: hidden;
        width: 150px;
        height: 50px;
        background: $actionDefaultColor;
        color: #fff;
        border-radius: 50px;
        font-size: 1.125rem;
        font-weight: bold;
        outline: none;
        border: none;
        transition: .3s;

        &.active {
          visibility: visible;
          cursor: pointer;
          transition: .3s;
        }

        &.grabState {
          background: $actionBtnGrabCardColor;
          &:hover {
            background: $actionBtnGrabHoverCardColor;
          }
        }

        &.discardState {
          background: $actionBtnDiscardColor;
          &:hover {
            background: $actionBtnDiscardHoverColor;
          }
        }
      }

      .trumpOfGame {
        grid-area: trump;
        display: flex;
        width: 100px;
        height: 100px;


        &.clubs {
          @extend %clubs;
        }

        &.diamonds {
          @extend %diamonds;
        }

        &.spades {
          @extend %spades;
        }

        &.hearts {
          @extend %hearts;
        }
      }
    }
  }
}

